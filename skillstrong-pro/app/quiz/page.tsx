'use client';import { useState } from 'react';import { questions,score,roleMap } from '@/lib/riasec';
export default function Quiz(){const [ans,setAns]=useState<Record<number,boolean>>({});const [res,setRes]=useState<any>(null);
function toggle(i:number){setAns(a=>({...a,[i]:!a[i]}));}
function submit(){const s=score(ans);setRes({top:s.top,roles:roleMap[s.top]});}
return(<main className='section'><div className='card' style={{maxWidth:900,margin:'0 auto'}}><h2 className='h2'>Interest Quiz (RIASEC‑lite)</h2><p className='p'>Check what sounds like you. ~2 minutes.</p><div style={{display:'grid',gap:10}}>{questions.map((it,i)=>(<label key={i} className='card' style={{display:'flex',alignItems:'center',gap:10}}><input type='checkbox' checked={!!ans[i]} onChange={()=>toggle(i)}/>{it.q}</label>))}</div><div style={{height:12}}/><button className='btn' onClick={submit}>See my matches</button>{res&&(<div className='card' style={{marginTop:16}}><div className='h2'>Top theme: {res.top}</div><div className='p'>Suggested roles:</div><ul>{res.roles.map((r:any,i:number)=>(<li key={i}><strong>{r.title}</strong> — {r.summary}</li>))}</ul><div className='chips' style={{marginTop:8}}>{res.roles.map((r:any,i:number)=>(<a key={i} className='chip' href={'/chat?pref='+encodeURIComponent(r.prompt)}>Explore {r.title}</a>))}</div></div>)}</div></main>);}
